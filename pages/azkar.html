<!DOCTYPE html>
<html lang="ar" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>أذكار الصباح و المساء</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+Arabic:wght@300;400;500;600;700&family=Lalezar&family=Scheherazade+New&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../styles/azkar.css">
</head>

<body class="theme-morning">
    <div id="cloud-animation-container">

    </div>
    <div class="main-container">
        <header class="header-main">
            <img src="https://i.ibb.co/3yDZTSfF/sbs-logo.webp" alt="أيقونة الفريق" class="app-icon"
                loading="lazy" decoding="async"
                onerror="this.src='https://placehold.co/60x60/cccccc/333333?text=Error'; this.alt='أيقونة بديلة';">
            <h1>أذكار المسلم</h1>
            <div class="subtitle-container">
                <p class="subtitle">الأذكار تشكل جزءًا أساسيًا من العبادة للمسلم، ووسيلة للمسلم للتقرب إلى الله سبحانه
                    وتعالى.</p>
                <p class="hadith-text"></p>
            </div>
        </header>

        <div class="tab-container">
            <button id="sabahTab" class="tab-button active" onclick="switchTab('sabah')">
                أذكار الصباح
            </button>
            <button id="masaaTab" class="tab-button" onclick="switchTab('masaa')">
                أذكار المساء
            </button>
        </div>

        <main class="container mx-auto px-4 py-2">
            <section id="azkarSabah" class="azkar-section">
                <h2 class="azkar-section-title">أذكار الصباح</h2>
                <div class="progress-bar-container">
                    <div id="progressBarSabah" class="progress-bar-fill" style="width: 0%;">0%</div>
                </div>
                <div id="dynamicContentSabah" class="dynamic-content-container">
                </div>
            </section>

            <section id="azkarMasaa" class="azkar-section hidden">
                <h2 class="azkar-section-title">أذكار المساء</h2>
                <div class="progress-bar-container">
                    <div id="progressBarMasaa" class="progress-bar-fill" style="width: 0%;">0%</div>
                </div>
                <div id="dynamicContentMasaa" class="dynamic-content-container">
                </div>
            </section>
        </main>
    </div>
    <footer class="footer">
        <p>© <span id="currentYear"></span> صدقة جارية لفريق شباب بتساعد شباب </p>
        <p>و لجميع أموات المسلمين</p>
    </footer>

    <script>

        const rawAzkarData = {
            sabah: [
                {
                    text: "اللَّهُ لَا إِلَٰهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ لَا تَأْخُذُهُ سِنَةٌ وَلَا نَوْمٌ لَهُ مَا فِي السَّمَاوَاتِ وَمَا فِي الْأَرْضِ مَنْ ذَا الَّذِي يَشْفَعُ عِنْدَهُ إِلَّا بِإِذْنِهِ يَعْلَمُ مَا بَيْنَ أَيْدِيهِمْ وَمَا خَلْفَهُمْ وَلَا يُحِيطُونَ بِشَيْءٍ مِنْ عِلْمِهِ إِلَّا بِمَا شَاءَ وَسِعَ كُرْسِيُّهُ السَّمَاوَاتِ وَالْأَرْضَ وَلَا يَئُودُهُ حِفْظُهُمَا وَهُوَ الْعَلِيُّ الْعَظِيمُ ﴿٢٥٥﴾<br><small>(سورة البقرة: الآية ٢٥٥)</small>",
                    count: "مرة واحدة"
                }, {
                    text: "بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ<br>قُلْ هُوَ اللَّهُ أَحَدٌ ﴿١﴾ اللَّهُ الصَّمَدُ ﴿٢﴾ لَمْ يَلِدْ وَلَمْ يُولَدْ ﴿٣﴾ وَلَمْ يَكُنْ لَهُ كُفُوًا أَحَدٌ ﴿٤﴾\n<br><small>(سورة الإخلاص)</small>",
                    count: "3 مرات"
                },
                {
                    text: "بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ<br>قُلْ أَعُوذُ بِرَبِّ الْفَلَقِ ﴿١﴾ مِنْ شَرِّ مَا خَلَقَ ﴿٢﴾ وَمِنْ شَرِّ غَاسِقٍ إِذَا وَقَبَ ﴿٣﴾ وَمِنْ شَرِّ النَّفَّاثَاتِ فِي الْعُقَدِ ﴿٤﴾ وَمِنْ شَرِّ حَاسِدٍ إِذَا حَسَدَ ﴿٥﴾\n<br><small>(سورة الفلق)</small>",
                    count: "3 مرات"
                },
                {
                    text: "بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ<br>قُلْ أَعُوذُ بِرَبِّ النَّاسِ ﴿١﴾ مَلِكِ النَّاسِ ﴿٢﴾ إِلَٰهِ النَّاسِ ﴿٣﴾ مِنْ شَرِّ الْوَسْوَاسِ الْخَنَّاسِ ﴿٤﴾ الَّذِي يُوَسْوِسُ فِي صُدُورِ النَّاسِ ﴿٥﴾ مِنَ الْجِنَّةِ وَالنَّاسِ ﴿٦﴾\n<br><small>(سورة الناس)</small>",
                    count: "3 مرات"
                }, { text: "أَصْبَحْنَا وَأَصْبَحَ الْمُلْكُ لِلَّهِ وَالْحَمْدُ لِلَّهِ، لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ، رَبِّ أَسْأَلُكَ خَيْرَ مَا فِي هَذَا الْيَوْمِ وَخَيْرَ مَا بَعْدَهُ، وَأَعُوذُ بِكَ مِنْ شَرِّ مَا فِي هَذَا الْيَوْمِ وَشَرِّ مَا بَعْدَهُ، رَبِّ أَعُوذُ بِكَ مِنَ الْكَسَلِ وَسُوءِ الْكِبَرِ، رَبِّ أَعُوذُ بِكَ مِنْ عَذَابٍ فِي النَّارِ وَعَذَابٍ فِي الْقَبْرِ.", count: "مرة واحدة" },
                { text: "اللَّهُمَّ بِكَ أَصْبَحْنَا، وَبِكَ أَمْسَيْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ وَإِلَيْكَ النُّشُورُ.", count: "مرة واحدة" },
                { text: "اللَّهُمَّ أَنْتَ رَبِّي لَا إِلَهَ إِلَّا أَنْتَ، خَلَقْتَنِي وَأَنَا عَبْدُكَ، وَأَنَا عَلَى عَهْدِكَ وَوَعْدِكَ مَا اسْتَطَعْتُ، أَعُوذُ بِكَ مِنْ شَرِّ مَا صَنَعْتُ، أَبُوءُ لَكَ بِنِعْمَتِكَ عَلَيَّ، وَأَبُوءُ بِذَنْبِي فَاغْفِرْ لِي، فَإِنَّهُ لَا يَغْفِرُ الذُّنُوبَ إِلَّا أَنْتَ.", count: "مرة واحدة" },
                { text: "اللَّهُمَّ إِنِّي أَصْبَحْتُ أُشْهِدُكَ، وَأُشْهِدُ حَمَلَةَ عَرْشِكَ، وَمَلَائِكَتَكَ، وَجَمِيعَ خَلْقِكَ، أَنَّكَ أَنْتَ اللَّهُ لَا إِلَهَ إِلَّا أَنْتَ وَحْدَكَ لَا شَرِيكَ لَكَ، وَأَنَّ مُحَمَّدًا عَبْدُكَ وَرَسُولُكَ.", count: "4 مرات" },
                { text: "اللَّهُمَّ مَا أَصْبَحَ بِي مِنْ نِعْمَةٍ أَوْ بِأَحَدٍ مِنْ خَلْقِكَ فَمِنْكَ وَحْدَكَ لَا شَرِيكَ لَكَ، فَلَكَ الْحَمْدُ وَلَكَ الشُّكْرُ.", count: "مرة واحدة" },
                { text: "اللَّهُمَّ عَافِنِي فِي بَدَنِي، اللَّهُمَّ عَافِنِي فِي سَمْعِي، اللَّهُمَّ عَافِنِي فِي بَصَرِي، لَا إِلَهَ إِلَّا أَنْتَ. اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْكُفْرِ، وَالْفَقْرِ، وَأَعُوذُ بِكَ مِنْ عَذَابِ الْقَبْرِ، لَا إِلَهَ إِلَّا أَنْتَ.", count: "3 مرات" },
                { text: "حَسْبِيَ اللَّهُ لَا إِلَهَ إِلَّا هُوَ عَلَيْهِ تَوَكَّلْتُ وَهُوَ رَبُّ الْعَرْشِ الْعَظِيمِ.", count: "7 مرات" },
                { text: "بِسْمِ اللَّهِ الَّذِي لَا يَضُرُّ مَعَ اسْمِهِ شَيْءٌ فِي الْأَرْضِ وَلَا فِي السَّمَاءِ وَهُوَ السَّمِيعُ الْعَلِيمُ.", count: "3 مرات" },
                { text: "رَضِيتُ بِاللَّهِ رَبًّا، وَبِالْإِسْلَامِ دِينًا، وَبِمُحَمَّدٍ صَلَّى اللَّهُ عَلَيْهِ وَسَلَّمَ نَبِيًّا.", count: "3 مرات" },
                { text: "يَا حَيُّ يَا قَيُّومُ بِرَحْمَتِكَ أَسْتَغِيثُ أَصْلِحْ لِي شَأْنِي كُلَّهُ وَلَا تَكِلْنِي إِلَى نَفْسِي طَرْفَةَ عَيْنٍ.", count: "مرة واحدة" },
                { text: "أَصْبَحْنَا عَلَى فِطْرَةِ الْإِسْلَامِ، وَعَلَى كَلِمَةِ الْإِخْلَاصِ، وَعَلَى دِينِ نَبِيِّنَا مُحَمَّدٍ صَلَّى اللَّهُ عَلَيْهِ وَسَلَّمَ، وَعَلَى مِلَّةِ أَبِينَا إِبْرَاهِيمَ حَنِيفًا مُسْلِمًا وَمَا كَانَ مِنَ الْمُشْرِكِينَ.", count: "مرة واحدة" },
                { text: "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ، عَدَدَ خَلْقِهِ، وَرِضَا نَفْسِهِ، وَزِنَةَ عَرْشِهِ، وَمِدَادَ كَلِمَاتِهِ.", count: "3 مرات" },
                { text: "اللَّهُمَّ عَالِمَ الْغَيْبِ وَالشَّهَادَةِ فَاطِرَ السَّمَاوَاتِ وَالْأَرْضِ رَبَّ كُلِّ شَيْءٍ وَمَلِيكَهُ، أَشْهَدُ أَنْ لَا إِلَهَ إِلَّا أَنْتَ، أَعُوذُ بِكَ مِنْ شَرِّ نَفْسِي، وَمِنْ شَرِّ الشَّيْطَانِ وَشِرْكِهِ، وَأَنْ أَقْتَرِفَ عَلَى نَفْسِي سُوءًا أَوْ أَجُرَّهُ إِلَى مُسْلِمٍ.", count: "مرة واحدة" },
                { text: "أَعُوذُ بِكَلِمَاتِ اللَّهِ التَّامَّاتِ مِنْ شَرِّ مَا خَلَقَ.", count: "3 مرات" },
                { text: "لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ.", count: "10 مرات" },
                { text: "اللَّهُمَّ صَلِّ وَسَلِّمْ وَبَارِكْ على نَبِيِّنَا مُحمَّد.", count: "10 مرات" },
                { text: "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ سُبْحَانَ اللَّهِ الْعَظِيمِ.", count: "100 مرة" }
            ],
            masaa: [
                {
                    text: "اللَّهُ لَا إِلَٰهَ إِلَّا هُوَ الْحَيُّ الْقَيُّومُ لَا تَأْخُذُهُ سِنَةٌ وَلَا نَوْمٌ لَهُ مَا فِي السَّمَاوَاتِ وَمَا فِي الْأَرْضِ مَنْ ذَا الَّذِي يَشْفَعُ عِنْدَهُ إِلَّا بِإِذْنِهِ يَعْلَمُ مَا بَيْنَ أَيْدِيهِمْ وَمَا خَلْفَهُمْ وَلَا يُحِيطُونَ بِشَيْءٍ مِنْ عِلْمِهِ إِلَّا بِمَا شَاءَ وَسِعَ كُرْسِيُّهُ السَّمَاوَاتِ وَالْأَرْضَ وَلَا يَئُودُهُ حِفْظُهُمَا وَهُوَ الْعَلِيُّ الْعَظِيمُ ﴿٢٥٥﴾<br><small>(سورة البقرة: الآية ٢٥٥)</small>",
                    count: "مرة واحدة"
                },
                { text: "آمَنَ الرَّسُولُ بِمَا أُنْزِلَ إِلَيْهِ مِنْ رَبِّهِ وَالْمُؤْمِنُونَ كُلٌّ آمَنَ بِاللَّهِ وَمَلَائِكَتِهِ وَكُتُبِهِ وَرُسُلِهِ لَا نُفَرِّقُ بَيْنَ أَحَدٍ مِنْ رُسُلِهِ وَقَالُوا سَمِعْنَا وَأَطَعْنَا غُفْرَانَكَ رَبَّنَا وَإِلَيْكَ الْمَصِيرُ. لَا يُكَلِّفُ اللَّهُ نَفْسًا إِلَّا وُسْعَهَا لَهَا مَا كَسَبَتْ وَعَلَيْهَا مَا اكْتَسَبَتْ رَبَّنَا لَا تُؤَاخِذْنَا إِنْ نَسِينَا أَوْ أَخْطَأْنَا رَبَّنَا وَلَا تَحْمِلْ عَلَيْنَا إِصْرًا كَمَا حَمَلْتَهُ عَلَى الَّذِينَ مِنْ قَبْلِنَا رَبَّنَا وَلَا تُحَمِّلْنَا مَا لَا طَاقَةَ لَنَا بِهِ وَاعْفُ عَنَّا وَاغْفِرْ لَنَا وَارْحَمْنَا أَنْتَ مَوْلَانَا فَانْصُرْنَا عَلَى الْقَوْمِ الْكَافِرِينَ. (البقرة 285 - 286)", count: "مرة واحدة" },
                {
                    text: "بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ<br>قُلْ هُوَ اللَّهُ أَحَدٌ ﴿١﴾ اللَّهُ الصَّمَدُ ﴿٢﴾ لَمْ يَلِدْ وَلَمْ يُولَدْ ﴿٣﴾ وَلَمْ يَكُنْ لَهُ كُفُوًا أَحَدٌ ﴿٤﴾\n<br><small>(سورة الإخلاص)</small>",
                    count: "3 مرات"
                },
                {
                    text: "بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ<br>قُلْ أَعُوذُ بِرَبِّ الْفَلَقِ ﴿١﴾ مِنْ شَرِّ مَا خَلَقَ ﴿٢﴾ وَمِنْ شَرِّ غَاسِقٍ إِذَا وَقَبَ ﴿٣﴾ وَمِنْ شَرِّ النَّفَّاثَاتِ فِي الْعُقَدِ ﴿٤﴾ وَمِنْ شَرِّ حَاسِدٍ إِذَا حَسَدَ ﴿٥﴾\n<br><small>(سورة الفلق)</small>",
                    count: "3 مرات"
                },
                {
                    text: "بِسْمِ اللَّهِ الرَّحْمَٰنِ الرَّحِيمِ<br>قُلْ أَعُوذُ بِرَبِّ النَّاسِ ﴿١﴾ مَلِكِ النَّاسِ ﴿٢﴾ إِلَٰهِ النَّاسِ ﴿٣﴾ مِنْ شَرِّ الْوَسْوَاسِ الْخَنَّاسِ ﴿٤﴾ الَّذِي يُوَسْوِسُ فِي صُدُورِ النَّاسِ ﴿٥﴾ مِنَ الْجِنَّةِ وَالنَّاسِ ﴿٦﴾\n<br><small>(سورة الناس)</small>",
                    count: "3 مرات"
                }, { text: "أَمْسَيْنَا وَأَمْسَى الْمُلْكُ لِلَّهِ وَالْحَمْدُ لِلَّهِ، لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ، رَبِّ أَسْأَلُكَ خَيْرَ مَا فِي هَذِهِ اللَّيْلَةِ وَخَيْرَ مَا بَعْدَهَا، وَأَعُوذُ بِكَ مِنْ شَرِّ مَا فِي هَذِهِ اللَّيْلَةِ وَشَرِّ مَا بَعْدَهَا، رَبِّ أَعُوذُ بِكَ مِنَ الْكَسَلِ وَسُوءِ الْكِبَرِ، رَبِّ أَعُوذُ بِكَ مِنْ عَذَابٍ فِي النَّارِ وَعَذَابٍ فِي الْقَبْرِ.", count: "مرة واحدة" },
                { text: "اللَّهُمَّ بِكَ أَمْسَيْنَا، وَبِكَ أَصْبَحْنَا، وَبِكَ نَحْيَا، وَبِكَ نَمُوتُ وَإِلَيْكَ الْمَصِيرُ.", count: "مرة واحدة" },
                { text: "اللَّهُمَّ أَنْتَ رَبِّي لَا إِلَهَ إِلَّا أَنْتَ، خَلَقْتَنِي وَأَنَا عَبْدُكَ، وَأَنَا عَلَى عَهْدِكَ وَوَعْدِكَ مَا اسْتَطَعْتُ، أَعُوذُ بِكَ مِنْ شَرِّ مَا صَنَعْتُ، أَبُوءُ لَكَ بِنِعْمَتِكَ عَلَيَّ، وَأَبُوءُ بِذَنْبِي فَاغْفِرْ لِي، فَإِنَّهُ لَا يَغْفِرُ الذُّنُوبَ إِلَّا أَنْتَ.", count: "مرة واحدة" },
                { text: "اللَّهُمَّ إِنِّي أَمْسَيْتُ أُشْهِدُكَ، وَأُشْهِدُ حَمَلَةَ عَرْشِكَ، وَمَلَائِكَتَكَ، وَجَمِيعَ خَلْقِكَ، أَنَّكَ أَنْتَ اللَّهُ لَا إِلَهَ إِلَّا أَنْتَ وَحْدَكَ لَا شَرِيكَ لَكَ، وَأَنَّ مُحَمَّدًا عَبْدُكَ وَرَسُولُكَ.", count: "4 مرات" },
                { text: "اللَّهُمَّ مَا أَمْسَى بِي مِنْ نِعْمَةٍ أَوْ بِأَحَدٍ مِنْ خَلْقِكَ فَمِنْكَ وَحْدَكَ لَا شَرِيكَ لَكَ، فَلَكَ الْحَمْدُ وَلَكَ الشُّكْرُ.", count: "مرة واحدة" },
                { text: "اللَّهُمَّ عَافِنِي فِي بَدَنِي، اللَّهُمَّ عَافِنِي فِي سَمْعِي، اللَّهُمَّ عَافِنِي فِي بَصَرِي، لَا إِلَهَ إِلَّا أَنْتَ. اللَّهُمَّ إِنِّي أَعُوذُ بِكَ مِنَ الْكُفْرِ، وَالْفَقْرِ، وَأَعُوذُ بِكَ مِنْ عَذَابِ الْقَبْرِ، لَا إِلَهَ إِلَّا أَنْتَ.", count: "3 مرات" },
                { text: "حَسْبِيَ اللَّهُ لَا إِلَهَ إِلَّا هُوَ عَلَيْهِ تَوَكَّلْتُ وَهُوَ رَبُّ الْعَرْشِ الْعَظِيمِ.", count: "7 مرات" },
                { text: "بِسْمِ اللَّهِ الَّذِي لَا يَضُرُّ مَعَ اسْمِهِ شَيْءٌ فِي الْأَرْضِ وَلَا فِي السَّمَاءِ وَهُوَ السَّمِيعُ الْعَلِيمُ.", count: "3 مرات" },
                { text: "رَضِيتُ بِاللَّهِ رَبًّا، وَبِالْإِسْلَامِ دِينًا، وَبِمُحَمَّدٍ صَلَّى اللَّهُ عَلَيْهِ وَسَلَّمَ نَبِيًّا.", count: "3 مرات" },
                { text: "يَا حَيُّ يَا قَيُّومُ بِرَحْمَتِكَ أَسْتَغِيثُ أَصْلِحْ لِي شَأْنِي كُلَّهُ وَلَا تَكِلْنِي إِلَى نَفْسِي طَرْفَةَ عَيْنٍ.", count: "مرة واحدة" },
                { text: "أَمْسَيْنَا عَلَى فِطْرَةِ الْإِسْلَامِ، وَعَلَى كَلِمَةِ الْإِخْلَاصِ، وَعَلَى دِينِ نَبِيِّنَا مُحَمَّدٍ صَلَّى اللَّهُ عَلَيْهِ وَسَلَّمَ، وَعَلَى مِلَّةِ أَبِينَا إِبْرَاهِيمَ حَنِيفًا مُسْلِمًا وَمَا كَانَ مِنَ الْمُشْرِكِينَ.", count: "مرة واحدة" },
                { text: "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ، عَدَدَ خَلْقِهِ، وَرِضَا نَفْسِهِ، وَزِنَةَ عَرْشِهِ، وَمِدَادَ كَلِمَاتِهِ.", count: "3 مرات" },
                { text: "اللَّهُمَّ عَالِمَ الْغَيْبِ وَالشَّهَادَةِ فَاطِرَ السَّمَاوَاتِ وَالْأَرْضِ رَبَّ كُلِّ شَيْءٍ وَمَلِيكَهُ، أَشْهَدُ أَنْ لَا إِلَهَ إِلَّا أَنْتَ، أَعُوذُ بِكَ مِنْ شَرِّ نَفْسِي، وَمِنْ شَرِّ الشَّيْطَانِ وَشِرْكِهِ، وَأَنْ أَقْتَرِفَ عَلَى نَفْسِي سُوءًا أَوْ أَجُرَّهُ إِلَى مُسْلِمٍ.", count: "مرة واحدة" },
                { text: "أَعُوذُ بِكَلِمَاتِ اللَّهِ التَّامَّاتِ مِنْ شَرِّ مَا خَلَقَ.", count: "3 مرات" },
                { text: "لَا إِلَهَ إِلَّا اللَّهُ وَحْدَهُ لَا شَرِيكَ لَهُ ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ.", count: "10 مرات" },
                { text: "اللَّهُمَّ صَلِّ وَسَلِّمْ وَبَارِكْ على نَبِيِّنَا مُحمَّد.", count: "10 مرات" },
                { text: "سُبْحَانَ اللَّهِ وَبِحَمْدِهِ سُبْحَانَ اللَّهِ الْعَظِيمِ.", count: "100 مرة" }
            ]

        };

        const ahadith = [
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «مَنْ قَالَ سُبْحَانَ اللَّهِ وَبِحَمْدِهِ فِي يَوْمٍ مِائَةَ مَرَّةٍ حُطَّتْ خَطَايَاهُ وَإِنْ كَانَتْ مِثْلَ زَبَدِ الْبَحْرِ». (متفق عليه)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «كَلِمَتَانِ خَفِيفَتَانِ عَلَى اللِّسَانِ، ثَقِيلَتَانِ فِي الْمِيزَانِ، حَبِيبَتَانِ إِلَى الرَّحْمَنِ: سُبْحَانَ اللَّهِ وَبِحَمْدِهِ، سُبْحَانَ اللَّهِ الْعَظِيمِ». (متفق عليه)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «أَحَبُّ الْكَلامِ إِلَى اللَّهِ أَرْبَعٌ: سُبْحَانَ اللَّهِ، وَالْحَمْدُ لِلَّهِ، وَلا إِلَهَ إِلا اللَّهُ، وَاللَّهُ أَكْبَرُ». (رواه مسلم)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «لأَنْ أَقُولَ سُبْحَانَ اللَّهِ وَالْحَمْدُ لِلَّهِ وَلا إِلَهَ إِلا اللَّهُ وَاللَّهُ أَكْبَرُ، أَحَبُّ إِلَيَّ مِمَّا طَلَعَتْ عَلَيْهِ الشَّمْسُ». (رواه مسلم)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «مَنْ صَلَّى عَلَيَّ صَلاةً صَلَّى اللَّهُ عَلَيْهِ بِهَا عَشْرًا». (رواه مسلم)",
            "عَنْ أَبِي هُرَيْرَةَ رضي الله عنه أَنَّ رَسُولَ اللَّهِ صلى الله عليه وسلم قَالَ: «مَنْ سَبَّحَ اللَّهَ فِي دُبُرِ كُلِّ صَلاةٍ ثَلاثًا وَثَلاثِينَ، وَحَمِدَ اللَّهَ ثَلاثًا وَثَلاثِينَ، وَكَبَّرَ اللَّهَ ثَلاثًا وَثَلاثِينَ، فَتِلْكَ تِسْعَةٌ وَتِسْعُونَ، وَقَالَ تَمَامَ الْمِائَةِ: لا إِلَهَ إِلا اللَّهُ وَحْدَهُ لا شَرِيكَ لَهُ، لَهُ الْمُلْكُ وَلَهُ الْحَمْدُ وَهُوَ عَلَى كُلِّ شَيْءٍ قَدِيرٌ، غُفِرَتْ خَطَايَاهُ وَإِنْ كَانَتْ مِثْلَ زَبَدِ الْبَحْرِ». (رواه مسلم)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «الدُّنْيَا سِجْنُ الْمُؤْمِنِ وَجَنَّةُ الْكَافِرِ». (رواه مسلم)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «إِنَّ اللَّهَ لا يَنْظُرُ إِلَى صُوَرِكُمْ وَأَمْوَالِكُمْ، وَلَكِنْ يَنْظُرُ إِلَى قُلُوبِكُمْ وَأَعْمَالِكُمْ». (رواه مسلم)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «الْمُؤْمِنُ الْقَوِيُّ خَيْرٌ وَأَحَبُّ إِلَى اللَّهِ مِنَ الْمُؤْمِنِ الضَّعِيفِ، وَفِي كُلٍّ خَيْرٌ». (رواه مسلم)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «مَنْ سَلَكَ طَرِيقًا يَلْتَمِسُ فِيهِ عِلْمًا سَهَّلَ اللَّهُ لَهُ بِهِ طَرِيقًا إِلَى الْجَنَّةِ». (رواه مسلم)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «لا تَحْقِرَنَّ مِنَ الْمَعْرُوفِ شَيْئًا وَلَوْ أَنْ تَلْقَى أَخَاكَ بِوَجْهٍ طَلْقٍ». (رواه مسلم)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «اتَّقُوا النَّارَ وَلَوْ بِشِقِّ تَمْرَةٍ». (متفق عليه)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «إِنَّمَا الأَعْمَالُ بِالنِّيَّاتِ، وَإِنَّمَا لِكُلِّ امْرِئٍ مَا نَوَى». (متفق عليه)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «مَا نَقَصَتْ صَدَقَةٌ مِنْ مَالٍ». (رواه مسلم)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «الْحَيَاءُ لا يَأْتِي إِلا بِخَيْرٍ». (متفق عليه)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «مَنْ كَانَ يُؤْمِنُ بِاللَّهِ وَالْيَوْمِ الآخِرِ فَلْيَقُلْ خَيْرًا أَوْ لِيَصْمُتْ». (متفق عليه)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «إِنَّ الصِّدْقَ يَهْدِي إِلَى الْبِرِّ، وَإِنَّ الْبِرَّ يَهْدِي إِلَى الْجَنَّةِ». (متفق عليه)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «لا يُؤْمِنُ أَحَدُكُمْ حَتَّى يُحِبَّ لأَخِيهِ مَا يُحِبُّ لِنَفْسِهِ». (متفق عليه)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «مَنْ غَشَّنَا فَلَيْسَ مِنَّا». (رواه مسلم)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «الرَّاحِمُونَ يَرْحَمُهُمُ الرَّحْمَنُ، ارْحَمُوا مَنْ فِي الأَرْضِ يَرْحَمْكُمْ مَنْ فِي السَّمَاءِ». (رواه الترمذي، وقال: حديث حسن صحيح)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «مَنْ يَسَّرَ عَلَى مُعْسِرٍ، يَسَّرَ اللَّهُ عَلَيْهِ فِي الدُّنْيَا وَالآخِرَةِ». (رواه مسلم)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «خَيْرُكُمْ مَنْ تَعَلَّمَ الْقُرْآنَ وَعَلَّمَهُ». (رواه البخاري)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «إِذَا مَاتَ الإِنْسَانُ انْقَطَعَ عَنْهُ عَمَلُهُ إِلا مِنْ ثَلاثَةٍ: إِلا مِنْ صَدَقَةٍ جَارِيَةٍ، أَوْ عِلْمٍ يُنْتَفَعُ بِهِ، أَوْ وَلَدٍ صَالِحٍ يَدْعُو لَهُ». (رواه مسلم)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «الطُّهُورُ شَطْرُ الإِيمَانِ». (رواه مسلم)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «تَبَسُّمُكَ فِي وَجْهِ أَخِيكَ لَكَ صَدَقَةٌ». (رواه الترمذي وحسنه)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «إِنَّ الدَّالَّ عَلَى الْخَيْرِ كَفَاعِلِهِ». (رواه الترمذي)",
            "قَالَ رَسُولُ اللَّهِ صلى الله عليه وسلم: «مَنْ لَمْ يَشْكُرِ النَّاسَ لَمْ يَشْكُرِ اللَّهَ». (رواه الترمذي)"
        ];

        let azkarData = { sabah: [], masaa: [] };
        let currentIndices = { sabah: 0, masaa: 0 };
        let activeTab = 'sabah';
        let hadithInterval;

        function parseInitialCount(countString) {
            if (!countString) return 1;
            const match = countString.match(/(\d+)\s*مر/);
            if (match && match[1]) return parseInt(match[1], 10);
            if (countString.includes("مرة واحدة")) return 1;
            const fallbackMatch = countString.match(/(\d+)/);
            if (fallbackMatch && fallbackMatch[1]) return parseInt(fallbackMatch[1], 10);
            return 1;
        }

        function initializeAzkarState() {
            ['sabah', 'masaa'].forEach(type => {
                if (rawAzkarData[type] && rawAzkarData[type].length > 0) {
                    azkarData[type] = rawAzkarData[type].map((zikr, index) => {
                        const initialCount = parseInitialCount(zikr.count);
                        return {
                            id: `${type}-${index}`,
                            text: zikr.text,
                            originalCountText: zikr.count,
                            initialNumericCount: initialCount,
                            currentNumericCount: initialCount,
                            isCompleted: false,
                            type: type
                        };
                    });
                } else {
                    azkarData[type] = [];
                }
            });
        }

        function createZikrCardHTML(zikr) {
            const isMultiCount = zikr.initialNumericCount > 1;
            const buttonText = isMultiCount ? (zikr.isCompleted ? 'أُكمل' : 'تسبيح') : (zikr.isCompleted ? 'تم' : 'إتمام');
            const actionType = isMultiCount ? 'decrement' : 'done';
            const disabledState = zikr.isCompleted ? 'disabled' : '';
            const buttonClass = zikr.isCompleted ? 'disabled-button' : '';

            let countDisplayHTML = '';
            if (isMultiCount) {
                countDisplayHTML = `
                    <div class="azkar-original-count-wrapper">
                        <span class="azkar-original-count-text">التكرار:</span>
                        <span id="count-${zikr.id}" class="current-count-value">${zikr.currentNumericCount}</span>
                    </div>`;
            } else {
                countDisplayHTML = `
                    <div class="azkar-original-count-wrapper">
                        <span class="azkar-original-count-text">${zikr.originalCountText}</span>
                    </div>`;
            }

            return `
                <div id="${zikr.id}" class="azkar-card">
                    <p class="azkar-text">${zikr.text}</p>
                    <div class="azkar-meta">
                        ${countDisplayHTML}
                        <div class="azkar-actions">
                            <button onclick="handleAction('${zikr.id}', '${zikr.type}', '${actionType}')"
                                    class="action-button ${buttonClass}" ${disabledState}>
                                ${buttonText}
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderCurrentZikr(listType) {
            const dynamicContentContainerId = `dynamicContent${listType.charAt(0).toUpperCase() + listType.slice(1)}`;
            const dynamicContentContainer = document.getElementById(dynamicContentContainerId);
            const progressBarContainer = document.querySelector(`#azkar${listType.charAt(0).toUpperCase() + listType.slice(1)} .progress-bar-container`);

            if (!dynamicContentContainer) {
                console.error(`Container not found: ${dynamicContentContainerId}`);
                return;
            }
            dynamicContentContainer.innerHTML = '';

            const currentIndex = currentIndices[listType];
            const currentList = azkarData[listType];

            if (!currentList || currentList.length === 0) {
                if (progressBarContainer) progressBarContainer.classList.add('hidden');
                const messageColor = document.body.classList.contains('theme-morning') ? '#0d0a3b' : '#bbe8e8';
                dynamicContentContainer.innerHTML = `<p style="color: ${messageColor}; text-align: center; font-size: 1.2rem; padding: 2rem; background: rgba(255,255,255,0.1); border-radius: 12px;">الرجاء إضافة بيانات الأذكار.</p>`;
                updateProgressBar(listType);
                return;
            }

            if (currentIndex < currentList.length) {
                if (progressBarContainer) progressBarContainer.classList.remove('hidden');
                const currentZikr = currentList[currentIndex];
                dynamicContentContainer.innerHTML = createZikrCardHTML(currentZikr);
            } else {
                if (progressBarContainer) progressBarContainer.classList.add('hidden');

                const completionEmoji = listType === 'sabah' ? '☀️' : '🌙';
                const completionMainTitle = listType === 'sabah' ? 'ما شاء الله!' : 'الحمد لله!';
                const completionText = listType === 'sabah' ?
                    "لقد أتممت أذكار الصباح بنور وهداية. بارك الله في يومك وجعله مليئًا بالخير والبركات." :
                    "لقد أتممت أذكار المساء بسكينة وطمأنينة. نسأل الله لك ليلة هانئة ونومًا عميقًا في حفظه ورعايته.";

                dynamicContentContainer.innerHTML = `
                    <div class="completion-message">
                        <span class="emoji">${completionEmoji}</span>
                        <h3 class="azkar-title">${completionMainTitle}</h3>
                        <p>${completionText}</p>
                    </div>
                `;
            }
            updateProgressBar(listType);
        }

        window.handleAction = function (zikrId, listType, actionType) {
            const zikrIndex = azkarData[listType].findIndex(z => z.id === zikrId);
            if (zikrIndex === -1) return;

            const zikr = azkarData[listType][zikrIndex];

            if (zikr.isCompleted) return;

            let justCompleted = false;
            if (actionType === 'decrement') {
                if (zikr.currentNumericCount > 0) {
                    zikr.currentNumericCount--;
                    const countDisplay = document.getElementById(`count-${zikr.id}`);
                    if (countDisplay) countDisplay.textContent = zikr.currentNumericCount;

                    if (zikr.currentNumericCount === 0) {
                        zikr.isCompleted = true;
                        justCompleted = true;
                    }
                }
            } else if (actionType === 'done') {
                zikr.currentNumericCount = 0;
                zikr.isCompleted = true;
                justCompleted = true;
            }

            if (justCompleted) {
                const cardElement = document.getElementById(zikr.id);
                if (cardElement) {
                    const button = cardElement.querySelector('.action-button');
                    if (button) {
                        button.classList.add('disabled-button');
                        button.textContent = zikr.initialNumericCount > 1 ? 'أُكمل' : 'تم';
                        button.disabled = true;
                    }

                    const particle = document.createElement('div');
                    particle.className = 'flying-particle';
                    document.body.appendChild(particle);

                    const cardRect = cardElement.getBoundingClientRect();
                    const particleStartX = cardRect.left + (cardRect.width / 2) - (particle.offsetWidth / 2);
                    const particleStartY = cardRect.top + (cardRect.height / 2) - (particle.offsetHeight / 2);

                    particle.style.left = `${particleStartX}px`;
                    particle.style.top = `${particleStartY}px`;

                    const isMorning = document.body.classList.contains('theme-morning');
                    const particleColor = isMorning ? '#f08c7e' : '#bbe8e8';
                    const particleGlow1 = isMorning ? '#f08c7e' : '#bbe8e8';
                    const particleGlow2 = isMorning ? '#f08c7e' : '#bbe8e8';
                    particle.style.backgroundImage = `radial-gradient(circle, ${particleGlow1} 20%, ${particleColor} 80%)`;
                    particle.style.boxShadow = `0 0 15px 3px ${particleGlow1}, 0 0 8px 1px ${particleGlow2}`;

                    const progressBarId = `progressBar${listType.charAt(0).toUpperCase() + listType.slice(1)}`;
                    const progressBarFill = document.getElementById(progressBarId);
                    let targetX, targetY;

                    if (progressBarFill && progressBarFill.parentElement.offsetParent !== null) {
                        const progressRect = progressBarFill.getBoundingClientRect();
                        const progressBarContainerWidth = progressBarFill.parentElement.offsetWidth;
                        const nextCompletedCount = azkarData[listType].filter(z_ => z_.isCompleted).length;
                        const newProgressPercentage = (nextCompletedCount / azkarData[listType].length);
                        const newProgressWidth = progressBarContainerWidth * newProgressPercentage;
                        targetX = progressRect.left + Math.min(newProgressWidth, progressBarContainerWidth) - (particle.offsetWidth / 2);
                        targetY = progressRect.top + (progressRect.height / 2) - (particle.offsetHeight / 2);
                    } else {
                        targetX = particleStartX;
                        targetY = particleStartY - 150;
                    }

                    requestAnimationFrame(() => {
                        particle.style.transform = `translate(${targetX - particleStartX}px, ${targetY - particleStartY}px) scale(0.1)`;
                        particle.style.opacity = '0';
                    });

                    cardElement.classList.add('is-completing');

                    setTimeout(() => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                        cardElement.classList.add('hidden-card');
                        cardElement.classList.remove('is-completing');

                        currentIndices[listType]++;
                        updateProgressBar(listType);
                        renderCurrentZikr(listType);
                    }, 700);
                }
            }
        }

        function updateProgressBar(listType) {
            const list = azkarData[listType];
            if (!list) {
                const progressBar = document.getElementById(`progressBar${listType.charAt(0).toUpperCase() + listType.slice(1)}`);
                if (progressBar) {
                    progressBar.style.width = '0%';
                    progressBar.textContent = '0%';
                }
                return;
            }
            const completedCount = list.filter(z => z.isCompleted).length;
            const totalCount = list.length;
            const percentage = totalCount > 0 ? (completedCount / totalCount) * 100 : 0;

            const progressBar = document.getElementById(`progressBar${listType.charAt(0).toUpperCase() + listType.slice(1)}`);
            if (progressBar) {
                progressBar.style.width = `${percentage}%`;
                progressBar.textContent = totalCount > 0 ? `${Math.round(percentage)}%` : '0%';
            }
        }
        window.switchTab = function (type) {
            activeTab = type;
            const sabahSection = document.getElementById('azkarSabah');
            const masaaSection = document.getElementById('azkarMasaa');
            const sabahTabBtn = document.getElementById('sabahTab');
            const masaaTabBtn = document.getElementById('masaaTab');

            const isSabah = type === 'sabah';

            // 1. قم بإزالة كلاسات الثيم الموجودة بشكل صريح أولاً
            document.body.classList.remove('theme-morning');
            document.body.classList.remove('theme-evening');

            // 2. أضف الكلاس الصحيح للثيم الحالي
            if (isSabah) {
                document.body.classList.add('theme-morning');
            } else {
                document.body.classList.add('theme-evening');
            }

            // 3. تحديث حالة الأزرار (active/inactive)
            sabahTabBtn.classList.toggle('active', isSabah);
            masaaTabBtn.classList.toggle('active', !isSabah);

            // 4. تحديث إظهار/إخفاء الأقسام
            sabahSection.classList.toggle('hidden', !isSabah);
            masaaSection.classList.toggle('hidden', isSabah);

            // --- التعديل الجديد: استخدام requestAnimationFrame ---
            // 5. تأجيل عمليات إعادة الرسم وتحديث الواجهة إلى ما بعد معالجة المتصفح لتغييرات الكلاس
            requestAnimationFrame(() => {
                renderCurrentZikr(type);
                updateProgressBar(type);
                updateCloudColors(isSabah);
                // نقل updateCloudColors هنا أيضًا لضمان الاتساق،
                // على الرغم من أن منطقها الحالي قد لا يتأثر بشدة بالتوقيت.
            });
            // --- نهاية التعديل الجديد ---
        }
        function createClouds(count = 10) {
            const container = document.getElementById('cloud-animation-container');
            if (!container) return;
            container.innerHTML = '';

            for (let i = 0; i < count; i++) {
                const cloud = document.createElement('div');
                cloud.className = 'cloud';

                const scaleFactor = Math.random() * 0.4 + 0.3;
                cloud.style.fontSize = `${scaleFactor}px`;

                cloud.style.top = `${Math.random() * 65 + 5}%`;
                cloud.style.left = `${Math.random() * 100 - 50}%`;

                const duration = Math.random() * 40 + 35;
                const delay = Math.random() * 3;

                cloud.style.setProperty('--cloud-start-x', `-400em`);
                cloud.style.setProperty('--cloud-end-x', `calc(100vw + 400em)`);
                cloud.style.setProperty('--cloud-start-y', `${Math.random() * 20 - 10}vh`);
                cloud.style.setProperty('--cloud-scale', `1`);

                cloud.style.animationDuration = `${duration}s`;
                cloud.style.animationDelay = `${delay}s`;

                container.appendChild(cloud);
            }
            updateCloudColors(document.body.classList.contains('theme-morning'));
        }

        function updateCloudColors(isMorning) {
            const clouds = document.querySelectorAll('.cloud');

            const cloudOpacity = isMorning ? '0.9' : '0.5';

            clouds.forEach(cloud => {
                cloud.style.setProperty('--cloud-opacity', cloudOpacity);
            });
        }

        function switchSubtitleToHadith() {
            const subtitleElement = document.querySelector('.header-main .subtitle');
            const hadithElement = document.querySelector('.header-main .hadith-text');

            if (subtitleElement && hadithElement && ahadith.length > 0) {
                subtitleElement.style.opacity = '0';
                subtitleElement.style.transform = 'translateY(-10px)';

                setTimeout(() => {
                    subtitleElement.style.display = 'none';

                    const randomIndex = Math.floor(Math.random() * ahadith.length);
                    hadithElement.textContent = ahadith[randomIndex];
                    hadithElement.style.display = 'block';

                    requestAnimationFrame(() => {
                        hadithElement.style.opacity = '1';
                        hadithElement.style.transform = 'translateY(0)';
                    });
                }, 500);
            }
        }

        document.getElementById('currentYear').textContent = new Date().getFullYear();

        document.addEventListener('DOMContentLoaded', () => {
            initializeAzkarState();
            switchTab('sabah');
            createClouds(7);
            setTimeout(switchSubtitleToHadith, 4000);
        });

    </script>

    <script src="../dist/js/darkmode.js" defer></script>
</body>

</html>